---
import Layout from "@layouts/Layout.astro";

interface Props {
	frontmatter: {
		title?: string;
		description?: string;
		showFooterGoBack?: boolean;
		backUrl?: string;
	};
}
const { frontmatter } = Astro.props;
---

<Layout {...frontmatter}>
	<article class="prose dark:prose-invert slide-enter-content">
		<slot />
	</article>

	<script>
		// find all <details> elements and add toggle functionality
		// on click of the summary element, hide all other details elements within the same
		// group (i.e., with the same data-group attribute)
		const detailsElements = document.querySelectorAll("details[data-group]");
		detailsElements.forEach((currDetailsEl) => {
			const summary = currDetailsEl.querySelector("summary");
			const group = currDetailsEl.getAttribute("data-group");

			summary?.addEventListener("click", () => {
				for (const el of detailsElements) {
					if (el === currDetailsEl) continue;

					if (el.getAttribute("data-group") === group) {
						el.removeAttribute("open");
					}
				}
			});
		});
	</script>
</Layout>

<style is:global>
	/* Shiki dark mode styles */
	html.dark .astro-code,
	html.dark .astro-code span {
		color: var(--shiki-dark) !important;
		background-color: var(--shiki-dark-bg) !important;
	}

	/* Add underline animation for prose links */
	.prose a {
		@apply decoration-none transition-[border]-300 ease-in-out;
		@apply border-b-0.5 border-b-solid border-b-black/25;
	}
	.prose a:hover {
		@apply border-b-black;
	}
	html.dark .prose a {
		@apply border-b-white/25;
	}
	html.dark .prose a:hover {
		@apply border-b-white;
	}

	/* Style inline code */
	.prose code {
		color: var(--fg-deep);
		font-weight: normal;
		background-color: #aaaaaa18;
		border-radius: 0.25rem;
		padding: 0.2em;
	}
	.prose code::before,
	.prose code::after {
		content: "";
	}

	.prose pre code {
		background-color: transparent;
		padding: 0;
	}

	/* Code copy button styles */
	pre:has(code) {
		@apply relative;
	}

	pre button.copy {
		@apply absolute right-2 top-2;
		@apply w-8 h-8 rd-2 p-4;
		@apply hover:bg-dark/5 dark:hover:bg-light/5;

		& span {
			@apply absolute top-1/2 left-1/2 translate--50% opacity-60;
			@apply w-full h-full aspect-ratio-square;
		}

		& .ready {
			@apply bg-current! i-myicons-copy;
		}

		& .success {
			@apply opacity-0 bg-green-300! i-myicons-copy-success;
		}

		&.copied {
			& .success {
				@apply opacity-60;
			}

			& .ready {
				@apply opacity-0;
			}
		}
	}

	/* Style giscus discussions */
	.giscus-frame {
		@apply outline-none my-8;
	}
</style>
