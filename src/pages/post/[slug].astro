---
import { getCollection, render } from "astro:content";
import MDLayout from "@layouts/MDLayout.astro";

export async function getStaticPaths() {
	let posts = await getCollection("posts");

	return posts.map((post) => {
		return {
			params: { slug: post.data.slug },
			props: { post },
		};
	});
}

const { post } = Astro.props;

const date = new Date(post.data.pubDate);
const fullDate = date.toLocaleDateString("en-us", {
	year: "numeric",
	month: "long",
	day: "numeric",
});

const { Content } = await render(post);
---

<MDLayout
	frontmatter={{
		title: post.data.title,
		backUrl: "/posts/",
	}}
>
	<h1 class="font-bold text-3xl mb-0">{post.data.title}</h1>
	<time class="text-sm opacity-50! !-mt-6" datetime={fullDate}>
		{fullDate}
	</time>

	<Content />
</MDLayout>
